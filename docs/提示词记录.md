我需要重写处理骰子结果的函数，函数只需要一个参数即前进步数的数字，之后的处理逻辑如下：

1. 然后开始行动状态，并记录剩余的步数，步数需要数组来记录，因为在后续处理格子的步骤中可能增加步数。
2. 然后开始处理每段的步数，依次的步进，每个格子都需要处理完对应格子的效果才结束，并且不切换到下一个玩家
3. 如果当前处理的步数数字不为0的情况下，进入格子的效果是“路过”，当前处理的步数数字为0的时候所在格子的效果是“停留”。
4. 依次处理完每个格子的效果一直到记录步数的数组为空，行动状态就结束了。
5. 格子的处理函数可以新建一个函数。其中包含需要中断等玩家选择之后继续处理的逻辑，目前可暂不实现。

PlayerRole 有6个角色分别是： “天命人”，“四妹”，“猪八戒”，“大鸟姐姐”，“神偷大盗”，“奶昔大哥”，将 Player 当作一个基础类型，将 ROLE_TILE_HANDLERS 的配置当作 Player 的公共方法，每个角色都继承 Player，并各自实现自己的类似 ROLE_TILE_HANDLERS 的方法。

游戏过程中有很多需要等待玩家操作的场景，而且其返回值各不相同，能否设计一个方便 UI 渲染层和游戏控制类交互的方式，在游戏过程中发起一个action或者通知之后，UI根据发起的类型展示对应的操作界面，用户完成操作之后，游戏内控制逻辑可以根据操作结果继续没有完成的流程。请给我一个设计方案，如果需要安装新的依赖也列出清单。

在 GameEventSystem 中为 GameEventType 添加一个出牌事件，然后在 PlayerHand 中订阅该事件，当触发时所有的卡牌都是可选的，而且选择结束后，调用的是

添加事件牌堆，当玩家停留在宝箱格的时候，随机选一张大事件触发，只有注明玩家可保留卡牌会进入玩家手牌，然后使用后重新进入事件牌堆。触发事件完成后打乱牌堆顺序。大事件类型如下：

1. 可与场上任一玩家互换所有卡牌。
2. 下一关BOSS 的 PK 直接通关。（玩家可保留此卡）
3. 你随机舍弃一张卡牌。
4. 你与下一位玩家随机舍弃一张卡牌。
5. 每位玩家从功能卡堆中抽取一张卡牌。
6. 你与上一位玩家从功能卡堆中抽取一张卡牌。
7. 每位玩家随机舍弃一张卡牌。
8. 选择一位玩家进行扔骰子的PK，如果你获胜可以抽取对方一张卡牌，失败则不抽取。
   当前可只创建事件牌堆及事件卡与玩家和游戏数据交互的接口，不实现事件的实际效果，打上TODO的标记。

事件牌堆不设置弃牌堆，因为事件卡是从牌堆中选择一张生效，并不会离开牌堆，只有玩家可保留的卡牌会被放入玩家手牌，从牌堆离开。在玩家手牌中使用了事件卡后，事件卡牌重新回到事件牌堆。
抽取事件牌堆的方法应利用事件系统触发一个抽取事件卡的事件，对应的在 UI 部分将展示现在的事件牌堆，展示卡背不可见卡牌效果，供玩家选择。玩家选择了一张事件卡后，解决事件，并执行事件卡的效果。
事件卡的执行效果结束后，打乱事件牌堆顺序。

使用 thinking 规划此任务，我需要完成 SwapAllCardsEventCard 中的执行逻辑。

1. 首选触发一个选择用户的事件，等待事件结束可能返回一个玩家 id。
   - 选择用户事件需要一个处理事件的 UI 组件，组件中展示除了当前玩家之外的所有玩家，玩家可以选择一个玩家后确定，返回该玩家的 id。或者选择放弃。
   - 玩家展示角色和剩余的手牌数量。
   - 可以通过点击选中和反选。
2. 在事件结束后，获取结果。如果没有返回 id 则说明玩家放弃交换，处理逻辑结束。如果获取返回玩家 id ，则交换两个玩家所有的卡牌。然后处理逻辑结束。

我想让选择玩家的组件更加通用。修改组件内和交换卡牌相关的文案，让组件更加通用。
为事件数据添加一个说明文字，方便在选择玩家组件上面展示。
为事件数据另外添加一个能否放弃的 boolean 值，只有当传入的事件数据中包含可以放弃的 boolean 时才可以选择放弃。
